## Cколько действительно независимых (не пересекающихся) каналов есть в разделяемой среде WiFi при работе на 2.4 ГГц?

В полосе частот 2.4 ГГц для беспроводных сетей доступны 13 каналов (в некоторых странах 11) с интервалами 5 МГц между ними. В России 3 канала из 13 непересекающиеся это 1,6 и 11.
Ответ: 3.
В полосе частот 5 ГГц доступно 19 непересекающихся каналов

---

## Какому производителю принадлежит MAC `38:f9:d3:55:55:79`?

Ответ: Apple, Inc.

---

## Каким будет payload TCP сегмента, если Ethernet MTU задан в 9001 байт, размер заголовков IPv4 – 20 байт, а TCP – 32 байта?

Если речь про MSS, то 9001 - 32 - 20 = 8949.

---

## Может ли во флагах TCP одновременно быть установлены флаги SYN и FIN при штатном режиме работы сети? Почему да или нет?

Наличие обоих флагов является нарушением правил TCP, в шатаном режиме такого происходить не должно.
Они могут быть установлены одновременно, например, по ошибке, или злоумышленником, или в результате сбоя.
Наличие обоих флагов нелогично, т.к. нелогичен процесс одновременного начала сессии и ее завершения.

---

## Почему в State команды (`ss -ula sport = :53`) присутствует только UNCONN, и может ли там присутствовать, например, TIME-WAIT?

Флаг `-u` в команде служит для вывода UDP сокетов. UDP - протокол без установления соединения, поэтому в state могут быть только значения UNCONN или ESTAB

---

## В каких состояниях будет находиться TCP соединение в каждый момент времени на клиенте и на сервере при завершении.

При завершении сеанса, одна из сторон отправляет сегмент FIN, переходя при этом в состояние FIN-WAIT-1, приняв этот сегмент другая сторона отправляет подтверждение ACK и переходит в состояние CLOSE-WAIT, продолжая передачу в симплексном режиме, после того как все данные переданы, отправляет со своей уже стороны сегмент FIN, завершая сеанс со своей стороны и переходит в состояние LAST-ACK. Первая сторона получив первое подтверждение ACK переходит в состояние FIN-WAIT-2 в котором продолжает получать данные до получения FIN от другой стороны. После получения FIN первым узлом, он переходит в состояние TIME-WAIT на 2MSL секунд, перед окончательным разрушением канала.

---

## Каким будет теоретическое максимальное число соединений, ограниченное только лишь параметрами L4, которое параллельно может установить клиент с одного IP адреса к серверу с одним IP адресом? Сколько соединений сможет обслужить сервер от одного клиента? А если клиентов больше одного?

Стек TCP/IP предполагает связь между узлами на основе 4-х значений: source_ip source_port destination_ip destination_port.
В случае соединения клиента будет меняться только source_port (прослушивающий порт может принимать несколько соединений), т.к. порт 16-битное число, предполагаю что 2^16 = 65_536 (кол-во соединений), если порты ничем не заняты. Сервер сможет обслужить такое же число соединений. Если клиентов больше одного, то умножаем это число на число клиентов. Однако, в таком случае можно упереться в количество файловых дескрипторов.

---

## Может ли сложиться ситуация, при которой большое число соединений TCP на хосте находятся в состоянии TIME-WAIT? Если да, то является ли она хорошей или плохой? Подкрепите свой ответ пояснением той или иной оценки.

Такая ситуация вполне может сложиться. Подобная ситуация является не очень хорошей, так как разрастание очереди TIME-WAIT ведет к исчерпанию ресурсов.

---

## Чем особенно плоха фрагментация UDP относительно фрагментации TCP?

UDP менее надежен для доставки из-за отсутсвия некоторых механизмов имеющихся в TCP. Поэтому если данные фрагментированы и какой-то фрагмент утерян, мы можем вообще ничего об этом не узнать, получив на выходе невалидные данные не зная об этом. В случае TCP мы, по карйней мере, будем знать что что-то пошло не так.

---

## Если бы вы строили систему удаленного сбора логов, то есть систему, в которой несколько хостов отправяют на центральный узел генерируемые приложениями логи (предположим, что логи – текстовая информация), какой протокол транспортного уровня вы выбрали бы и почему? Проверьте ваше предположение самостоятельно, узнав о стандартном протоколе syslog.

Логи - достаточно критическая часть инфраструктуры. Я бы предпочел гарантированную доставку всех логов, кроме того, на мой взгляд, сбор логов не то, что требует высокой скорости. Поэтому использование TCP, как мне кажется, более оправдано.
Как я понял, syslog по умолчанию использует UDP, но TCP так же поддерживается.

---

## Сколько портов TCP находится в состоянии прослушивания на вашей виртуальной машине с Ubuntu, и каким процессам они принадлежат?

```
$ sudo ss -ltp
State        Recv-Q       Send-Q              Local Address:Port                 Peer Address:Port       Process
LISTEN       0            4096                127.0.0.53%lo:domain                    0.0.0.0:*           users:(("systemd-resolve",pid=536,fd=13))
LISTEN       0            128                       0.0.0.0:ssh                       0.0.0.0:*           users:(("sshd",pid=1021,fd=3))
LISTEN       0            4096                      0.0.0.0:sunrpc                    0.0.0.0:*           users:(("rpcbind",pid=535,fd=4),("systemd",pid=1,fd=35))
LISTEN       0            128                          [::]:ssh                          [::]:*           users:(("sshd",pid=1021,fd=4))
LISTEN       0            4096                         [::]:sunrpc                       [::]:*           users:(("rpcbind",pid=535,fd=6),("systemd",pid=1,fd=37))
```

---

## Какой ключ нужно добавить в tcpdump, чтобы он начал выводить не только заголовки, но и содержимое фреймов в текстовом виде? А в текстовом и шестнадцатиричном?

- ключ `-l` для вывода в текстовом виде
- ключ `-XX` для вывода в текстовом и hex

---

## Попробуйте собрать дамп трафика с помощью tcpdump на основном интерфейсе вашей виртуальной машины и посмотреть его через tshark или Wireshark (можно ограничить число пакетов -c 100). Встретились ли вам какие-то установленные флаги Internet Protocol (не флаги TCP, а флаги IP)? Узнайте, какие флаги бывают. Как на самом деле называется стандарт Ethernet, фреймы которого попали в ваш дамп? Можно ли где-то в дампе увидеть OUI?

```
$ sudo tcpdump -i eth0 -c 100 -w tcpdump.out
$ tshark -r tcpdump.out -V
```
Встречался флаг IP `Don't fragment` (Flags: 0x4000, Don't fragment)

Я так понял, что речь про Ethernet II

Да, в дампе есть строки вида: `Src: RealtekU_12:35:02 (52:54:00:12:35:02), Dst: PcsCompu_df:93:aa (08:00:27:df:93:aa)`
